<!DOCTYPE html>
<html>
<head>
    <title>Mars Rover Photos and Mission Manifest</title>
    <link href="assets/style/style.css" rel="stylesheet">
</head>
<body>
    <h1>Mars Rover Photo Explorer</h1>

    <table>
        <tr>
          <th>Rover</th>
          <th>Mission Start</th>
          <th>Mission End</th>
        </tr>
        <tr>
          <td>Curiosity</td>
          <td>08/06/2012</td>
          <td>09/28/2019</td>
        </tr>
        <tr>
          <td>Opportunity</td>
          <td>01/26/2004</td>
          <td>06/11/2018</td>
        </tr>
        <tr>
          <td>Spirit</td>
          <td>01/05/2004</td>
          <td>03/21/2004</td>
        </tr>
      </table>

    <h2>Select a rover and a picture date:</h2>

    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script src="assets/js/script.js"></script>
  </head>
  <body>
    <h1>Mars Rover Photos</h1>
    <form>
      <label>Select a rover:</label>
      <input type="radio" name="rover" value="curiosity" checked>Curiosity
      <input type="radio" name="rover" value="opportunity">Opportunity
      <input type="radio" name="rover" value="spirit">Spirit
      <br>
      <label>Enter a date (YYYY-MM-DD):</label>
      <input type="text" name="date" required>
      <button type="button" onclick="searchPhotos()">Search</button>
      <button type="button" onclick="clearPage()">Clear</button>
    </form>
    <div id="error"></div>
    <div id="photo-count"></div>
    <div id="photos"></div>
    <script>
      function searchPhotos() {
        var rover = document.querySelector('input[name="rover"]:checked').value;
        var date = document.querySelector('input[name="date"]').value;
        var url = "https://api.nasa.gov/mars-photos/api/v1/rovers/" + rover + "/photos?earth_date=" + date + "&api_key=58OviRQvpYN8de8b23TeMc32MlZ6D8YidCb7EsaZ";
        if (date === "") {
          document.querySelector('#error').innerHTML = "Please enter a date";
          document.querySelector('#photo-count').innerHTML = "";
          document.querySelector('#photos').innerHTML = "";
        } else {
          document.querySelector('#error').innerHTML = "";
          $.getJSON(url, function(data) {
            var photos = data.photos.slice(0, 25);
            var html = "";
            if (photos.length === 0) {
              document.querySelector('#photo-count').innerHTML = "";
              document.querySelector('#error').innerHTML = "No photos for this date. Try another!";
              document.querySelector('#photos').innerHTML = "";
            } else {
              document.querySelector('#photo-count').innerHTML = photos.length + " photos found";
              for (var i = 0; i < photos.length; i++) {
                var photo = photos[i];
                html += "<div><img src='" + photo.img_src + "' onclick='enlargeImage(this)'></div>";
              }
              document.querySelector('#error').innerHTML = "";
              document.querySelector('#photos').innerHTML = html;
            }
          });
        }
      }
      
      function clearPage() {
        location.reload();
      }
      
      function enlargeImage(img) {
        img.style.width = "100%";
        
      }
    </script>
  </body>
    </html>